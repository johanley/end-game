<!DOCTYPE html>
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <meta name="keywords" content="retirement, Canada, Canadian, simulator, calculator, planner">
 <meta name="description" content="Personal finance simulator for retired Canadians.">
 <meta name="viewport" content="width=device-width"> 
 <link rel="stylesheet" type="text/css" href="stylesheet.css?v=1" media="all"> 
 <title>End Game: Personal finance simulator for retired Canadians</title>
</head>

<body>

<h2>End Game - personal finance simulator for retired Canadians</h2>

<P>The source code is <a href='https://github.com/johanley/end-game'>here</a>.

<ul>
 <li><a href="#overview">Overview</a>
 <li><a href="#limitations">Limitations</a>
 <li><a href="#features">Features</a>
 <li><a href="#scenarios">Example Scenarios</a>
 <li><a href="#lessons">Lessons Learned</a>
 <li><a href="#running">Running The Code In Eclipse</a>
</ul> 

<h2 id='overview'>Overview</h2>
The main purpose of this project is: 
<ul> 
 <li>to help you explore different retirement scenarios  
 <li>to help you find a better financial plan for your retirement
</ul>

<P><b>This tool is focused almost entirely on the retirement phase of life (spending), not on the 
working phase of life (saving)</b>.

<P>The level of detail in this tool is higher than usual.
Whereas most tools focus on a high-level rate of return, this tool actually goes through every single day of your retirement, 
and applies transactions to your accounts.
It also calculates a basic tax return at the end of every year.

<P>The level of detail will not reflect your actual reality 100%, but it will get you closer to reality than most other tools.
It's a trade off: in a perfect world, matching reality 100% is of course desirable; but to implement all possible cases
for all possible conditions is not practical here. 
So this tool tries to reach a compromise, and <b>tries to reflect reality to a reasonable degree, but not with 100% accuracy</b>. 

<P>
Every retirement financial plan should be supported by a robust simulation showing you the numbers.
Personal finance is quite complex.
There are many moving parts, and those parts all work together in your particular case can be found only with a simulator. 
<b>You can't do these calculations in your head, and you shouldn't rely entirely on <em>rules of thumb</em>, because such 
rules usually have exceptions.</b>

<P>This tool has:
<ul>
 <li>helped me find thousands of additional dollars in cash flow
 <li>increased my level of confidence in my financial plan
 <li>helped me answer many different questions
 <li>helped me in speaking to a financial advisor
</ul>

<h2 id='limitations'>Limitations</h2>
This tool has a limited scope:
<ul>
 <li>there's no spousal logic.
 <li>the set of supported securities is only cash, stocks, and GICs. 
 <li>it supports RSP/RIF, TFSA, non-registered accounts, and simple bank accounts, but no other types of accounts. 
 <li>there's no logic specific to insurance, debt, real estate, charitable donations, and so on.
</ul>

In spite of these limitations, you may find it useful to examine the example scenario outputs.

<P>There are <b>two important issues which I hope to address soon</b>:
<ul>
  <li>add support for ETFs (Exchange-traded funds, an asset class that is very widely held)
  <li>add support for LIRA/LIF accounts
 </ul>

In general, I would like to improve the tool. I could use some assistance with that.

<h2 id='features'>Features</h2>
Features include:
<ul>
 <li>input-output using text files
 <li>the input text file is a <em>scenario</em>, a text file describing details of your accounts, assets, transactions, 
  start-date for retirement, expected CPP benefit, pension, and so on
 <li>internally, the system runs through every single day of your entire retirement life, and applies transactions defined 
 in your scenario file
 <li>some scenarios have randomness, and some don't 
 <li>the randomness only comes from variation in the market price of securities
 <li>basic tax returns are calculated, both federal and provincial (territories not included at present)
 <li>the output is in .csv (comma-separated) files, which are easily imported into spreadsheet tools (and thereby charted)
 <li>log output shows transactions, yearly summaries, and tax returns
 <li>you can repeat a scenario multiple times, to reflect the spread in outcomes caused by randomness (Monte Carlo simulation)
 <li>the tool can run multiple scenarios in sequence 
 <li>the code is implemented in Java, and can be run on any computer
 <li>changes to the market prices of stock are applied once a year
</ul>

<P>Some items that aren't modeled explicitly can still be effectively modeled by the system. 
 For example, the sale of a primary residence can be modeled as a simple windfall deposited to your bank account, since 
 no tax is paid on the capital gain when you sell your home.  

<P>There are two distinct types of scenarios:
<ul> 
 <li>those with precisely predictable cash flows (OAS, CPP, GIS, annuities, pensions)
 <li>those without precisely predictable cash flows (assets vary in value with the market price)
</ul>

<P>Examples of approximations made by the tool:
<ul> 
 <li>stock prices are updated just once a year (using a policy you define) 
 <li>the tax return is calculated and applied simply at the end of the year, and not later in the following year
 <li>OAS clawbacks are applied (for high income earners) all in one year; in reality, the clawback is applied over 2 calendar years
 <li>the life-table stats from Statistics Canada are for the Canada-wide case, not for the specific province
</ul>

<h2 id='scenarios'>Example Scenarios</h2>
These example scenarios are included in the source code. 
They are listed in rough order of increasing complexity.

<P>Note that the <em>.ini</em> file is the scenario file, and the remaining files in the directory are outputs that 
result from executing the scenario. The provincial tax return is for PE, Prince Edward Island, simply because 
that's where the author resides. The tool allows for all other provinces as well.

<table class='report'>
 <tr><th>ID<th>Description
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/01.1'>01.1</a><td>Never worked, no savings, retires at 65. OAS/GIS, rent 700. PE. Deterministic.
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/01.2'>01.2</a><td>Worker with no savings, retires at 65. CPP 300/month, OAS/GIS. PE. Deterministic.
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/01.3'>01.3</a><td>Worker with no savings, retires at 65. Average CPP 673/month, OAS/GIS, PE. Deterministic.
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/01.4'>01.4</a><td> Worker with no savings, retires at 65. CPP max monthly 1175.75, OAS/GIS. PE. Deterministic.
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/02.1'>02.1</a><td>Only a TFSA with 50k in blue-chip dividends. Half the average CPP. 3% dividend growth, 3% stock price growth.
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/02.2'>02.2</a><td>Only a TFSA with 100k in blue-chip dividends. Half the average CPP. 3% dividend growth, 3% stock price growth.
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/02.3'>02.3</a><td>Only a RIF with 100k in blue-chip dividends. Half the average CPP. 3% dividend growth, 3% stock price growth.
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/02.4'>02.4</a><td>Only a NRA with 100k in blue-chip dividends. Half the average CPP. 3% dividend growth, 3% stock price growth.
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/03.1'>03.1</a><td>Dividends only, never sell stocks. 3% dividend growth, 3% stock price growth.
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/07.1'>07.1</a><td>Pension 2000 monthly, no other savings, house unsold, retires at 65. Average CPP 673/month, OAS/GIS. PE. Deterministic.
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/07.2'>07.2</a><td>Govt of Canada pension 2234.00/month, no other savings, house unsold, retires at 65. Average CPP 673/month, OAS/GIS. PE. Deterministic.
 <tr><td><a href='https://github.com/johanley/end-game/tree/master/scenario/07.3'>07.3</a><td>GOC large pension 5483/month, no other savings, house unsold, retires at 65. Average CPP 673/month, OAS/GIS. PE. Deterministic.
</table>

<h2 id='lessons'>Lessons Learned</h2>

<b>Those with no savings will have cash flow in the low 20s.</b>
The cash flow for those who have no savings is basically the same no matter what your past history: it's in the low 20s.
This is because of how GIS works. GIS is designed to support cash flow up to a certain level, but not beyond that level.
Someone who has made 30K a year for their entire life, and has no savings, will have cash flow in the low 20s when 
they retire at 65, from OAS, GIS, and CPP. The same can be said if you made 100K a year, but spent it all and have no savings when 
you are 65. 

<P><b>It's the net cash flow that's most important.</b> That's where the focus should be. 
An example I saw had two scenarios, A vs B: A had 14k less tax than B, but only 2.9k more net cash than B.
If you leave out the net cash, and only focus on the tax saving, then you aren't fully informed.

<P><b>Spending generally decreases significantly in old age.</b>
Many people think in terms of having a flat cash flow, the same from retirement until death.
But, in reality, that's not usually what happens. 
It's a challenge to generate a cash flow curve that starts out higher and ends up lower, 
because the natural tendency for cash flow is to grow over time.
For those on a government pension (with no other savings), the cash flow is basically flat over time, and there's not much you 
can do about it.

<P><b>Many people die too rich</b>.
The psychology of the saver is different from the psychology of the spender.
Some spend many years as a saver, and later fail to change into a spender.
They keep growing their net worth until the end.
That isn't necessarily the wrong thing to do, but for many it's likely not the best outcome.
Oversaving can be as bad as overspending; perhaps it's best to avoid extremes.

<P><b>Living only off of dividends is almost always an error.</b>
Some investors are enthusiastic about dividend stocks, and attempt to generate cash flow only from the dividends, 
without selling any of the principal invested in the stocks.
During retirement, there's no need to be so conservative.
Periodically selling a small portion of your principal can generate a lot more cash flow, 
and is almost always better than relying solely on the dividends.   

<P><b>Selling stocks when the market is up, as opposed to when you want the cash, or a fixed schedule, is very beneficial.</b>
Given the large possible swings in stock prices, it makes sense to do <em>profit-taking</em> when the price is up.
You then save the cash for you future needs in 1-2 years (perhaps by purchasing a GIC).
You should avoid being compelled to sell stocks at a particular time.
The typical recession lasts about 1.5 years. 

<P><b>Desiring a sizeable legacy changes your plan significantly.</b> 
You have to understand what your goal is for your estate.
Some want to leave a significant legacy, and others want to spend as much as they can.
Both points of view are valid. 
But you have to know which is best for you, and act accordingly.

<P><b>Retirement planning is different from other projects, because it involves your own death.</b>
It's useful to be reminded that you might, by chance, die sooner rather than later.
The basic statistic from Statcan in this regard is interesting: the idea is that you start with a cohort of 
100,000 people at birth, and you then simply list the number of people that are still alive at each year of age.
The output spreadsheet files of this project usually incorporate this stat as a reminder of its importance.

 
<h2 id='running'>Running The Code In Eclipse</h2>

To run the code, this project recommends the <em>Eclipse</em> tool, a  
tool that programmers use to run and edit code. 
Here, you just want to run the code, not change it.

<P><b>First, create a workspace folder on your machine.</b>
When you launch Eclipse, you need to point to a workspace folder.
A workspace folder contains project folders, each of which contains the source code for a project.  

<P>An example setup:
<pre>
C:\bob\myworkspace\            [the workspace folder]
  C:\bob\myworkspace\end-game  [the project folder for end-game]
    ./settings
    docs            
    input             
    lib               [the various files and folders in the project]
    scenario
    src
    .classpath
    .gitignore
    .project
    LICENSE.txt
    README.md
</pre>

<P>Your setup will be similar, except you replace <em>C:\bob\myworkspace\</em> with something else.

<P>Next, you need to put the source code into the above folder structure
<ul> 
 <li>go to the <a href='https://github.com/johanley/end-game'>github repository</a> 
 <li>click on the <em>Code</em> button
 <li>click on <em>Download ZIP</em>
 <li>go to the download folder, and change the name from <em>end-game-master.zip</em> to <em>end-game.zip</em>
 <li>copy the zip file to your workspace folder
 <li>unzip end-game.zip
 <li>your folders should follow the pattern shown above!
</ul>

<P>Next, you run Eclipse, following these steps: 
<ul>
 <li><a href='https://www.eclipse.org/downloads/'>download</a> the Eclipse installer 
 <li>install Eclipse to a convenient location on your computer
 <li>launch Eclipse, and point it to the workspace directory you created earlier.
 (The first time you launch Eclipse, it might show a screen intended only for beginners. Close it.)
 <li>add the <em>JavaCC Eclipse plugin</em>. JavaCC is the tool that parses the input scenario file. 
 Eclipse menu: Help -> Eclipse Marketplace -> Find: <em>javacc</em>, and install the plugin.
</ul>

Now you are ready to experiment with your own scenarios.
<ul>
 <li>create your own scenario file. You can place the scenario anywhere you want. 
 Many will find it convenient to follow the existing pattern under the <em>scenario</em> folder in the project.
 You'll likely want to explore multiple scenarios, so you might create multiple folders under <em>scenario</em>, one folder 
 for each new scenario. 
 <li>execute the <em>RunSimulation</em> class. 
 You need to tell it the file location of your scenario file.
 The simplest way is to hard-code it in the <em>RunSimulation</em> class itself. 
</ul>


<h2>Web Site Versus Stand-alone</h2>
When deploying this code under a web site:
<ul>
 <li>pro: the user doesn't need to install any software
 <li>pro: it's easier to run a scenario, at least when getting started
 <li>con: web sites come and go, and usually die with the person who created them
 <li>con: the user exposes their personal financial information to a third party, and that may not be secure
 <li>con: some scenarios take a while to execute, and waiting for a web site to respond can be frustrating
</ul>

Advantages of running this code locally on your computer:
<ul>
 <li>con: for non-programmers, learning how to run the code takes some effort (but it's not that hard, I swear!)
 <li>pro: scenarios that take a while to execute can provide feedback as they run 
 <li>pro: the user is not dependent on a web site
 <li>pro: the user can alter the code directly, if need be
 <li>pro: not limited by time or disk space
 <li>pro: it executes faster than a web site
</ul> 
 


</body>
</html>