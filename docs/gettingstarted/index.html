<!DOCTYPE html>
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <meta name="keywords" content="retirement, Canada, Canadian, simulator, calculator, planner">
 <meta name="description" content="Personal finance simulator for retired Canadians.">
 <meta name="viewport" content="width=device-width"> 
 <link rel="stylesheet" type="text/css" href="stylesheet.css?v=1" media="all"> 
 <title>End Game: Personal finance simulator for retired Canadians</title>
</head>

<body>

<h2>End Game - Personal Finance Simulator for Retired Canadians</h2>

<P>The main documentation is <a href='https://johanley.github.io/end-game/'>here</a>.

<h2>Getting Started</h2>
This is a guide for running the code using the <em>Eclipse</em> tool.
You only have to do these steps once.
It takes about 20 minutes.


<h3>Step 1 - Folders and Source Code</h3>
First, create a <b>workspace</b> folder on your machine.

<P>When you launch <em>Eclipse</em>, you need to point to a workspace folder.
A workspace folder contains project folders.
Each project folder contains the source code for a project.

<P>These instructions will use a workspace named: 
<pre>C:\myworkspace\</pre>  

<P>An example setup:
<pre>
C:\myworkspace\            [the workspace folder]
  C:\myworkspace\end-game  [the project folder for end-game]
    ./settings
    docs            
    input             
    lib               [the various files and folders in the end-game project]
    scenario
    src
    .classpath
    .gitignore
    .project
    LICENSE.txt
    README.md
</pre>

<P>Your setup will be similar, except you can replace <em>C:\myworkspace\</em> with something else, if you wish.

<P>Next, you need to put the source code into the above folder structure:
<ul> 
 <li>go to the <a href='https://github.com/johanley/end-game'>github repository</a> 
 <li>click on the <em>Code</em> button
 <li>click on <em>Download ZIP</em>
 <li>copy the <em>end-game-master.zip</em> file to your workspace folder
 <li>unzip the file
 <li>change the name of the new folder from <em>end-game-master</em> to <em>end-game</em>
 <li>your folders should now follow the pattern shown above!
</ul>



<h3>Step 2 - Install and Run Eclipse</h3>
Install and run Eclipse, following these steps: 
<P><a href='https://www.eclipse.org/downloads/'>Download</a> the Eclipse installer.
 
<P>Run the installer, and select <em>Eclipse IDE for Java Developers</em> (if it it prompts you about licenses, just accept the license): 
<P><img src='install-01.png'>

<P>Install Eclipse to a convenient location on your computer:
<P><img src='install-02.png'>

<P>Launch Eclipse, and point it to the workspace directory you created earlier:
<P><img src='install-03.png'>

<p>The first time you launch Eclipse, it will show you a welcome screen. Close the welcome screen:
<P><img src='install-04.png'>
 
<P>Now you will see the main Eclipse window:
<P><img src='install-05.png'>



<h3>Step 3 - Import the end-game Project into Eclipse</h3>
Now that you have Eclipse running, it's time to point it to the <em>end-game</em> project and its source code.

<P>Click on <em>Import Projects</em>. Or, from the menu, select <em>File -> Import...</em>

<P>Choose <em>General -> Existing Projects into Workspace</em>:
<P><img src='install-06.png'>
 
<P>Point to the <em>end-game</em> project folder:
<P><img src='install-07.png'>

<P>The result should look like this: 
<P><img src='install-08.png'> 



<h3>Step 4 - Run an Example Scenario</h3>
On the left, open the <em>src</em> folder, and then the <em>endgame</em> folder.
Double click on the <em>RunSimulation</em> file (this is called a <em>class</em> in Java).
This is the main class that launches the tool. The task is to point it to a given scenario file.
To get started, we'll point it to an existing scenario file that comes with the source code. 
<P><img src='install-09.png'>
 
<P>There are two ways of pointing to the scenario file.
The easiest way is <em>Style #1</em>. 
If your workspace is different from <em>C:\workspace\</em>, then you will need to change one line to point to your actual 
workspace, and then save the change using the menu, File -> Save.

<P>Finally, to run the scenario and generate its output, in the menu select <em>Run -> Run As... -> Java application</em>.
That will generate logging output to something called the Console window.
It will also generate new .csv files that summarize the results.
The log file and .csv files are saved to the same directory as the scenario itself.

<P>Once you have run <em>RunSimulation</em> the first time, there are shortcuts for re-running the most recent execution:
<ul>
 <li>hit the green button in the tool bar at the top
 <li>hit the two keys Ctrl and F11 at the same time
</ul>

<P>The <em>RunMultipleSimulations</em> class works in a similar way. 
The only difference is that it is passed a top-level folder that contains multiple scenario folders.
 


<h3>Step 5 - Create your own Scenario</h3>
Now you are ready to experiment with your own scenarios.
You can place the scenario file anywhere you want. 
But most will find it convenient to follow the existing structure established with the example scenarios, all located under the <em>scenario</em> folder in the project.
The idea is simple: you just create a new folder for each scenario.

<P>Of course, in order to run your new scenario, you will need to point the <em>RunSimulation</em> class to the scenario file, using 
the method described above.

<h3>Common Kinds of Errors</h3>

<P>There are two common kinds of error you may see. 
First, take the case of a syntax error in the scenario file, where you have mistakenly typed:
<pre>ban-withdrawal 925.00 on *-02</pre>
which should be:
<pre>bank-withdrawal 925.00 on *-02</pre>
When you try to run the code using that scenario file, you'll see an error message in the Console window,
and it will tell you the exact location of the problem (in this case, line 230 and column 6 of the scenario file):
<pre>endgame.input.syntax.TokenMgrError: Lexical error at line 230, column 6.  Encountered: "-" (45), after : "ban"
  at endgame.input.syntax.ScenarioParserTokenManager.getNextToken(ScenarioParserTokenManager.java:4529)
  at endgame.input.syntax.ScenarioParser.jj_ntk(ScenarioParser.java:1910)
  at endgame.input.syntax.ScenarioParser.transactions(ScenarioParser.java:1284)
  at endgame.input.syntax.ScenarioParser.all(ScenarioParser.java:194)
  at endgame.input.syntax.ScenarioParser.parseInput(ScenarioParser.java:70)
  at endgame.input.syntax.ScenarioParser.parse(ScenarioParser.java:55)
  at endgame.RunSimulation.readInputFile(RunSimulation.java:168)
  at endgame.RunSimulation.run(RunSimulation.java:105)
  at endgame.RunSimulation.main(RunSimulation.java:71)</pre>
This is called a <em>stack trace</em>. 

<P>A different sort of error can occur later, after the scenario file has been successfully read and parsed.
An example is an operation that's not allowed for some reason.
For instance, if you try to withdraw too much money from your bank account, you'll see this error message 
in the Console window:
<pre>java.lang.RuntimeException: You're trying to withdraw 85000.00 but you only have 7130.27.
  at endgame.bank.BankAccount.withdrawCash(BankAccount.java:32)
  at endgame.bank.BankDepositWithdrawal.execute(BankDepositWithdrawal.java:30)
  at endgame.transaction.Transactional.executeOnDate(Transactional.java:34)
  at endgame.RunSimulation.transactionsUpdateThe(RunSimulation.java:240)
  at endgame.RunSimulation.run(RunSimulation.java:123)
  at endgame.RunSimulation.main(RunSimulation.java:71)</pre>


<h3>Step 6 (Optional) - Install the JavaCC plugin</h3>
You can skip this if you wish. 
It's for advanced users.
The <em>JavaCC</em> tool lets you change <em>ScenarioParser.jj</em>, which defines the syntax of the scenario file.
When you save changes to that file, <em>JavaCC</em> will automatically generate a number of Java classes. 
Those classes do the actual parsing of the scenario file. 

<P>To install the <em>JavaCC</em> plugin into Eclipse:
<ul>
 <li>from the menu, select <em>Help -> Eclipse Marketplace</em>
 <li>in the Find box, enter <em>javacc</em> and hit Enter
 <li>click the <em>Install</em> button for the <em>JavaCC</em> plugin
</ul>

<h3>Updating the Code</h3>
You may wish to get an updated version of the code.
To do that, just repeat the process described above, but use a different zip name and project name, for example <em>end-game-02</em>.
This will ensure you don't accidentally overwrite the previous version.
It's especially important to not lose or overwrite any scenario files you have made.

</body>
</html>